<UserControl x:Class="SliceX.Views.MachineControlView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="600" d:DesignWidth="800"
             Background="#1e1e1e">

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Margin="20">

            <!-- Z Axis Control -->
            <GroupBox Header="Z Axis" Foreground="White" BorderBrush="#3f3f46" Margin="0,0,0,15">
                <Grid Margin="10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <StackPanel Grid.Column="0">
                        <TextBlock Text="Z Rate" Foreground="#e0e0e0" Margin="0,0,0,5"/>
                        <TextBox Text="{Binding ZRateFast}" Style="{StaticResource ModernTextBox}" Margin="0,0,0,10"/>
                        <TextBlock Text="3000 mm/min" Foreground="#888" FontSize="10"/>
                    </StackPanel>
                    <StackPanel Grid.Column="1" Margin="20,0,0,0">
                        <TextBlock Text="Z Rate" Foreground="#e0e0e0" Margin="0,0,0,5"/>
                        <TextBox Text="{Binding ZRateSlow}" Style="{StaticResource ModernTextBox}" Margin="0,0,0,10"/>
                        <TextBlock Text="100 mm/min" Foreground="#888" FontSize="10"/>
                    </StackPanel>
                </Grid>
            </GroupBox>

            <!-- Motor Control -->
            <GroupBox Header="Motor Control" Foreground="White" BorderBrush="#3f3f46" Margin="0,0,0,15">
                <StackPanel Orientation="Horizontal" Margin="10">
                    <Button Content="Enable Motors" Command="{Binding EnableMotorsCommand}" 
                            Style="{StaticResource ModernButton}" Margin="0,0,10,0" Padding="15,8"/>
                    <Button Content="Disable Motors" Command="{Binding DisableMotorsCommand}" 
                            Style="{StaticResource ModernButton}" Padding="15,8"/>
                </StackPanel>
            </GroupBox>

            <!-- GCode Communication -->
            <GroupBox Header="GCode to send" Foreground="White" BorderBrush="#3f3f46" Margin="0,0,0,15">
                <StackPanel Margin="10">
                    <TextBox Text="{Binding GCodeToSend}" Style="{StaticResource ModernTextBox}" 
                             Height="60" TextWrapping="Wrap" AcceptsReturn="True" Margin="0,0,0,10"/>
                    <TextBlock Text="Sent:" Foreground="#e0e0e0" Margin="0,0,0,5"/>
                    <TextBox Text="{Binding SentGCode}" Style="{StaticResource ModernTextBox}" 
                             Height="40" IsReadOnly="True" Margin="0,0,0,10"/>
                    <Button Content="Send!" Command="{Binding SendGCodeCommand}" 
                            Style="{StaticResource PrimaryButton}" Padding="15,8"/>
                </StackPanel>
            </GroupBox>

            <!-- Toolhead Controls -->
            <GroupBox Header="Toolhead 0 (Extruder)" Foreground="White" BorderBrush="#3f3f46" Margin="0,0,0,15">
                <Grid Margin="10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <StackPanel Grid.Column="0">
                        <Button Content="Extrude" Command="{Binding ExtrudeTool0Command}" 
                                Style="{StaticResource ModernButton}" Margin="0,0,0,5" Padding="10,5"/>
                        <TextBox Text="{Binding ExtrudeDistance0}" Style="{StaticResource ModernTextBox}" Margin="0,0,0,5"/>
                        <TextBlock Text="10 mm" Foreground="#888" FontSize="10"/>
                    </StackPanel>
                    <StackPanel Grid.Column="1" Margin="20,0,0,0">
                        <Button Content="Reverse" Command="{Binding ReverseTool0Command}" 
                                Style="{StaticResource ModernButton}" Margin="0,0,0,5" Padding="10,5"/>
                        <TextBox Text="{Binding ReverseRate0}" Style="{StaticResource ModernTextBox}" Margin="0,0,0,5"/>
                        <TextBlock Text="100 mm/min" Foreground="#888" FontSize="10"/>
                    </StackPanel>
                </Grid>
            </GroupBox>

            <GroupBox Header="Toolhead 1 (Extruder)" Foreground="White" BorderBrush="#3f3f46" Margin="0,0,0,15">
                <Grid Margin="10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <StackPanel Grid.Column="0">
                        <Button Content="Extrude" Command="{Binding ExtrudeTool1Command}" 
                                Style="{StaticResource ModernButton}" Margin="0,0,0,5" Padding="10,5"/>
                        <TextBox Text="{Binding ExtrudeDistance1}" Style="{StaticResource ModernTextBox}" Margin="0,0,0,5"/>
                        <TextBlock Text="10 mm" Foreground="#888" FontSize="10"/>
                    </StackPanel>
                    <StackPanel Grid.Column="1" Margin="20,0,0,0">
                        <Button Content="Reverse" Command="{Binding ReverseTool1Command}" 
                                Style="{StaticResource ModernButton}" Margin="0,0,0,5" Padding="10,5"/>
                        <TextBox Text="{Binding ReverseRate1}" Style="{StaticResource ModernTextBox}" Margin="0,0,0,5"/>
                        <TextBlock Text="100 mm/min" Foreground="#888" FontSize="10"/>
                    </StackPanel>
                </Grid>
            </GroupBox>

            <!-- Homing -->
            <GroupBox Header="Homing" Foreground="White" BorderBrush="#3f3f46" Margin="0,0,0,15">
                <UniformGrid Rows="1" Columns="4" Margin="10">
                    <Button Content="X" Command="{Binding HomeXCommand}" 
                            Style="{StaticResource ModernButton}" Margin="2" Padding="15,8"/>
                    <Button Content="Y" Command="{Binding HomeYCommand}" 
                            Style="{StaticResource ModernButton}" Margin="2" Padding="15,8"/>
                    <Button Content="Z" Command="{Binding HomeZCommand}" 
                            Style="{StaticResource ModernButton}" Margin="2" Padding="15,8"/>
                    <Button Content="All" Command="{Binding HomeAllCommand}" 
                            Style="{StaticResource ModernButton}" Margin="2" Padding="15,8"/>
                </UniformGrid>
            </GroupBox>

            <!-- Projector Control -->
            <GroupBox Header="Projector" Foreground="White" BorderBrush="#3f3f46">
                <StackPanel Margin="10">
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                        <Button Content="Show" Command="{Binding ShowProjectorCommand}" 
                                Style="{StaticResource ModernButton}" Margin="0,0,10,0" Padding="10,5"/>
                        <Button Content="Connect Monitor" Command="{Binding ConnectMonitorCommand}" 
                                Style="{StaticResource ModernButton}" Margin="0,0,10,0" Padding="10,5"/>
                        <Button Content="Show Blank" Command="{Binding ShowBlankCommand}" 
                                Style="{StaticResource ModernButton}" Margin="0,0,10,0" Padding="10,5"/>
                    </StackPanel>
                    
                    <TextBox Text="{Binding ProjectorCommands}" Style="{StaticResource ModernTextBox}" 
                             Height="40" TextWrapping="Wrap" Margin="0,0,0,10"/>
                    
                    <StackPanel Orientation="Horizontal">
                        <Button Content="Edit Commands" Command="{Binding EditCommandsCommand}" 
                                Style="{StaticResource ModernButton}" Margin="0,0,10,0" Padding="10,5"/>
                        <Button Content="Hide" Command="{Binding HideProjectorCommand}" 
                                Style="{StaticResource ModernButton}" Margin="0,0,10,0" Padding="10,5"/>
                        <Button Content="Send" Command="{Binding SendProjectorCommand}" 
                                Style="{StaticResource ModernButton}" Margin="0,0,10,0" Padding="10,5"/>
                        <Button Content="Clear" Command="{Binding ClearProjectorCommand}" 
                                Style="{StaticResource ModernButton}" Padding="10,5"/>
                    </StackPanel>
                </StackPanel>
            </GroupBox>

        </StackPanel>
    </ScrollViewer>
</UserControl>